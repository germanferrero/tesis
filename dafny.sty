% dafny.sty
% Dafny mode for the LaTeX listings package.
% Rustan Leino, 22 June 2008.

\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{dafny}[2008/06/22 Dafny mode for listings]

\definecolor{codeyellow}{RGB}{220,220,170}
\definecolor{codeblue}{RGB}{84,114,214}
\definecolor{codepurple}{RGB}{197,134,192}
\definecolor{backcolour}{RGB}{31,31,31}

\lstdefinelanguage{dafny}{
  morekeywords = {method,returns,requires,ensures,int,nat,while,decreases,invariant,if,else, lemma, axiom, function, forall, exists, assert, assume, var, predicate, ghost, return},
  numbers=left,
  numberstyle=\color{white}\ttfamily,
  backgroundcolor=\color{backcolour},
  keywordstyle=\color{codepurple},
  basicstyle=\color{white}\ttfamily,
  frame=single,
  framexleftmargin=1em,
  % framexrightmargin=1em,
  frame={l},
  rulecolor=\color{green},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
  numbers=left,
  firstnumber=1,
  numberstyle=\tiny,
  stepnumber=1,
  commentstyle=\itshape
}

\lstnewenvironment{dafny}[1][]{%
  \lstset{
    language=dafny,
    #1}
}{}

\def\inlinedafny{%
  \lstinline[language=dafny,basicstyle=\ttfamily,columns=fixed]
}

\newcommand{\dafnyfile}[2]{
  \lstinputlisting[
    language=dafny,
    caption=\href{https://github.com/germanferrero/tesis/tree/main/#2}{\texttt{#1}},
    captionpos=b,
    basicstyle=\color{white}\ttfamily,
    frame=lines,
    xleftmargin=2em,
    xrightmargin=8pt,
    columns=fixed,
    breaklines=true]{#2}
}
